<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--meta http-equiv="X-UA-Compatible" content="IE=7" />-->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>OPEN社团主页</title>


<link rel="stylesheet" type="text/css" href="<?php echo BBS_WEB_TEMPLATE;?>/GeneralUI.css">
<?php

if (count($cssList)<1) array_push($cssList,'MainUI.css'); //若无额外CSS，则使用默认主页CSS
foreach($cssList as $temp) echo '<link rel="stylesheet" type="text/css" href="'.BBS_WEB_TEMPLATE.'/'.$temp.'">';

if (count($jsList)>0)
foreach($jsList as $temp) echo '<script src="'.BBS_WEB_TEMPLATE.'/'.$temp.'" type="text/javascript"></script>';

?>

</head>

<body>


<div class="pre-blank-field">
    <p align='center'></p>
</div>


<div class="logo-field">
    <img class='logo-pic' src='../src/include/template/img/logo.gif'></img>
	
</div>



<div class="login-field">
    <?php if(!isset($_SESSION['SysID'])) {?>
	<form name='test' action='?' method='POST' onsubmit='return matchName();'>
	<pre>  用户名: <input id ="Name" type='text' name='Name' /></pre>
	<pre>  密  码: <input id="Code" type='password' name='Code' /></pre>
	<input id='action' type='hidden' name='action' value='login' />
	<pre> <input type='submit' name='submit' value='登录' /></pre>
	</form>
	<?php } else
	{
	        echo $_SESSION['Name'].'已经登录。';
	?>
	<form name='test' action='?' method='POST'>
	<input id='action' type='hidden' name='action' value='logout' />
	<pre> <input type='submit' name='submit' value='登出' /></pre>
	</form>
	<?php
	}
	?>
</div>

<script>
	function matchName(){
		var reg = /^(?!_)(?!.*?_$)[a-zA-Z0-9_\u4e00-\u9fa5]+$/;
		if(!reg.test(document.getElementById("Name").value)){
			alert("账户包含非法字符。支持中文、英文、数字、“_”");
			return false;
		}
		else{
			return matchPassword();
		}
		
	}
	function matchPassword(){
		var x=document.getElementById("Code").value.length;
		if(x<6||x>18){
			alert("密码长度不符。请输入6-18位密码");
			return false;
		}
		else{
			return true;
		}
	}
</script>
<div style="clear:both;"></div><!--需要额外加一个DIV使得以上FLOAT作用不会继续传递到下面的DIV-->
